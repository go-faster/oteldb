test_cases:
  # Scalar literals.
  - query: "42"
  - query: "1.234"
  - query: ".123"
  - query: "1.23e-3"
  # Binary operators.
  - query: "vector(1) * vector(2) + vector(4) / vector(6) - vector(10) % vector(2) ^ vector(2)"

  # Log queries.
  #
  # Log selector.
  - query: '{this_label_clearly_not_exist=".+"}'
    should_be_empty: true
  - query: '{job="varlogs", this_label_clearly_not_exist="varlogs"}'
    should_be_empty: true
  - query: '{job="varlogs"}'
  - query: '{job=~".*varlogs.*"}'
  - query: '{job="varlogs", this_label_clearly_not_exist!="varlogs"}'
  # Comment.
  - query: '{job="varlogs"} # anything that comes after will not be interpreted in your query'
  # Line filter.
  - query: '{job="varlogs"} |= "no way line would contain this message"'
    should_be_empty: true
  - query: '{job="varlogs"} |= "HEAD"'
  - query: '{job="varlogs"} != "HEAD"'
  - query: '{job="varlogs"} |~ "(HEAD|GET)"'
  - query: '{job="varlogs"} !~ "(HEAD|GET)"'
  - query: '{job="varlogs"} |= "HEAD" or "GET"'
  # Pattern line filter.
  - query: '{job="varlogs"} |> "no way line would contain <_> pattern"'
    should_be_empty: true
  - query: '{job="varlogs"} !> "no way line would contain <_> pattern"'
  # JSON and label filters.
  - query: '{job="varlogs"} | json'
  - query: '{job="varlogs"} | json | method = "HEAD"'
  - query: '{job="varlogs"} | json | method != "HEAD"'
  - query: '{job="varlogs"} | json | method =~ "(HEAD|GET)"'
  - query: '{job="varlogs"} | json | method !~ "(HEAD|GET)"'
  - query: '{job="varlogs"} | json | status >= 400'
  - query: '{job="varlogs"} | json | took >= 1ms'
  - query: '{job="varlogs"} | json | size >= 1KB'
  - query: '{job="varlogs"} | json | status >= 400 or took >= 1ms'
  # Decolorize.
  - query: '{job="varlogs"} | decolorize'
  # Line format.
  # NOTE(tdakkota): since logqlcompliance, as promcompliance uses text/template
  #   to expand and generate queries, we need to escape `line_format` template too.
  - query: '{job="varlogs"} | line_format {{ "{{ __timestamp__ }}" | quote }}'
  - query: '{job="varlogs"} | json | line_format {{ "{{ .method }}" | quote }}'
  # Label format.
  - query: '{job="varlogs"} | json | label_format status_code=status | status_code >= 400'

  # Metric queries.
  #
  # Range aggregation.
  - query: |-
      {{ .simpleRangeAggOp }}(
        {job="varlogs"} [{{ .range }}]
      )
    variant_args: ["simpleRangeAggOp", "range"]
  - query: |-
      {{ .unwrapRangeAggOp }}(
        {job="varlogs"} | json | unwrap status
        [{{ .range }}]
      )
    variant_args: ["unwrapRangeAggOp", "range"]
    skip_comparison: true # It seems, there is some issues with unwrap.
  # Vector aggregation.
  - query: |-
      {{ .simpleVecAggOp }} by (filename) (
        {{ .simpleRangeAggOp }}(
          {job="varlogs"}
          [{{ .range }}]
        )
      )
    variant_args: ["simpleVecAggOp", "simpleRangeAggOp", "range"]
  - query: |-
      {{ .simpleVecAggOp }} by (method) (
        {{ .simpleRangeAggOp }}(
          {job="varlogs"} | json
          [{{ .range }}]
        )
      )
    variant_args: ["simpleVecAggOp", "simpleRangeAggOp", "range"]
